<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Custos — People</title>
  <meta name="description" content="Custos — calm, local-first meeting briefings and context." />
  <meta name="theme-color" content="#f5f1ea" />
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <link rel="icon" href="favicon.ico" sizes="any" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <h1>Custos</h1>
      <span class="demo-badge hidden" id="demo-badge">Demo Mode</span>
    </div>
    <nav class="global-nav" aria-label="Primary">
      <a class="nav-link" href="index.html">Briefing</a>
      <a class="nav-link active" href="people.html" aria-current="page">People</a>
      <a class="nav-link" href="status.html">Status</a>
      <button class="nav-link nav-action" id="capture-quick" type="button">Quick capture</button>
      <button class="nav-link nav-action" id="capture-open" type="button">Capture</button>
    </nav>
  </header>
  <main class="container">
    <section class="brief-header">
      <div class="brief-title">People</div>
      <div class="brief-meta">
        <div class="status" id="people-status">Updated just now</div>
      </div>
    </section>
    <div class="banner" id="people-banner"></div>

    <section class="cards" id="people-list"></section>

    <section class="section" id="timeline-section">
      <h3>Timeline</h3>
      <div class="cards" id="timeline"></div>
    </section>
  </main>

  <div class="modal" id="capture-modal" aria-hidden="true">
    <div class="modal-backdrop" data-capture-close></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="capture-title">
      <div class="modal-header">
        <h2 id="capture-title">Capture context</h2>
        <button class="icon-button" id="capture-close" type="button" aria-label="Close capture panel">×</button>
      </div>
      <form class="modal-body" id="capture-form">
        <button type="button" class="button-link" id="capture-advanced-toggle">Show details</button>
        <div id="capture-advanced">
          <label for="capture-meeting">Context</label>
          <select id="capture-meeting" name="meeting" aria-describedby="capture-meeting-detail">
            <option value="next">Next context</option>
            <option value="today">Today</option>
            <option value="create">Create new context</option>
          </select>
          <p class="muted" id="capture-meeting-detail">Select a context to attach capture details.</p>
          <label for="capture-meeting-title" id="capture-meeting-title-label" class="hidden">New context title</label>
          <div class="tag-input hidden" id="capture-meeting-create">
            <input id="capture-meeting-title" name="meeting_title" placeholder="e.g. Lucia follow-up" />
          </div>
          <p class="muted hidden" id="capture-meeting-help">We will create a context entry and attach your capture.</p>

          <label for="capture-type">Capture type</label>
          <select id="capture-type" name="capture_type">
            <option value="notes">Notes</option>
            <option value="transcript">Transcript</option>
            <option value="decision">Decision</option>
            <option value="follow-up">Follow-up</option>
            <option value="reflection">Reflection</option>
          </select>
          <label for="capture-commitment-relevant">Relevant by (optional)</label>
          <input id="capture-commitment-relevant" type="date" name="commitment_relevant_by" />
          <label for="capture-relevant">Relevant when (optional)</label>
          <select id="capture-relevant" name="relevant_when">
            <option value="">Not set</option>
            <option value="later-today">Later today</option>
            <option value="this-week">This week</option>
            <option value="next-week">Next week</option>
            <option value="date">Specific date…</option>
          </select>
          <input id="capture-relevant-date" class="hidden" type="date" name="relevant_date" />
        </div>

        <div class="checkbox-row" id="capture-index-group">
          <label for="capture-index-memory">Include in memory</label>
          <input id="capture-index-memory" type="checkbox" />
        </div>

        <label for="capture-notes">Notes</label>
        <textarea id="capture-notes" name="payload" rows="6" placeholder="Write notes here"></textarea>

        <div id="capture-people-group">
          <label for="capture-people-input">People (optional)</label>
          <div class="tag-input">
            <input id="capture-people-input" list="people-options" placeholder="Start typing a name" />
            <select id="capture-people-type">
              <option value="person">Person</option>
              <option value="org">Organization</option>
            </select>
            <button type="button" class="button-link" id="capture-add-person">Add contact</button>
          </div>
          <datalist id="people-options"></datalist>
          <p class="muted" id="capture-people-help">Choose from the list or add a contact.</p>
          <div class="tag-list" id="capture-people-tags"></div>
        </div>

        <p class="muted" id="capture-status" aria-live="polite"></p>
        <div class="modal-actions">
          <button type="submit" id="capture-submit">Save</button>
          <button type="button" class="button-link" id="capture-reset-defaults">Reset defaults</button>
          <button type="button" class="button-link" data-capture-close>Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script src="config.js"></script>
  <script type="module" src="people.js"></script>
</body>
</html>
